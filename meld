#! /usr/bin/env python2.2

import sys
import meldapp

################################################################################
#
# Main
#
################################################################################
def main():
    class Unbuffered:
        def __init__(self, file):
            self.file = file
        def write(self, arg):
            self.file.write(arg)
            self.file.flush()
        def __getattr__(self, attr):
            return getattr(self.file, attr)
    sys.stdout = Unbuffered(sys.stdout)
    if 0:
        print >>sys.stderr, "Usage: meld <[file1 file2 [file3]] | directory>\n"
        sys.exit(1)
    app = meldapp.MeldApp()
    if len(sys.argv) == 1:
        pass
    elif len(sys.argv) == 2:
        app.append_cvsview( [sys.argv[1]] )
    elif len(sys.argv) in (3,4):
        app.append_filediff( sys.argv[1:] )
    app.mainloop()

if __name__=="__main__":
    #import profile
    #profile.run("main()", "profile.meld")
    main()

